# Prism Player PRD 评审报告

> **评审人**：GitHub Copilot（模拟资深移动端架构师）
> **日期**：2025-10-17
> **评审对象**：`Prism Player 产品需求文档（PRD） v0.1`

## 1. 总体评价

这是一份非常出色和专业的PRD，结构清晰、内容全面，覆盖了从产品目标到技术实现的各个层面。文档的撰写者对产品和技术有深入的思考，为项目的顺利启动和开发奠定了坚实的基础。

文档质量：**优秀**。

## 2. 主要优点

1.  **目标明确**：清晰地定义了产品的核心价值——提供完全离线的音视频字幕生成体验，并设定了可量化的成功指标（KPI），如“首帧字幕可见时间”和“同步偏差”。
2.  **范围界定清晰**：`In Scope` 和 `Out of Scope` 的划分非常合理，有助于团队在项目初期聚焦核心功能，避免范围蔓延。
3.  **用户导向**：通过用户故事（User Stories）和验收标准（AC）的形式来定义需求，使得功能开发的目标更具体，也便于测试和验证。
4.  **技术可行性考虑充分**：文档不仅提出了需求，还给出了具体的技术选型建议（如 Whisper.cpp、AVPlayer/ExoPlayer），并对iOS和Android平台进行了差异化分析，显示了扎实的技术预研。
5.  **非功能性需求（NFR）完备**：从性能、资源、隐私、国际化等多个维度定义了非功能性需求，这对于提升产品质量和用户体验至关重要。
6.  **风险意识强**：文档末尾主动识别了性能、合规、存储等潜在风险，并提出了初步的缓解措施，体现了成熟的工程思维。
7.  **分阶段规划合理**：将项目划分为三个里程碑（M1-M3），从原型到可用再到优化，符合敏捷开发的迭代节奏。

## 3. 潜在风险与待明确问题

尽管文档很优秀，但在具体执行前，以下几点值得团队进一步深入探讨和明确：

1.  **实时处理因子（RTF）的目标是否过于保守？**
    - PRD中定义 `RTF ≥ 0.5`（即处理1分钟音频最多耗时2分钟）。对于“边播边识别”的场景，这意味着字幕的生成速度会落后于播放速度。用户可能会在观看过程中长时间等待字幕。
    - **建议**：明确此RTF是基于何种设备和模型（如低端设备+base模型）的底线标准。建议为典型场景（如中端设备+small模型）设定一个更积极的目标，例如 `RTF < 1`。

2.  **模型分发与首次使用体验的矛盾**
    - **问题**：完全离线的目标与模型获取方式存在冲突。若模型预置于App内，将导致应用体积剧增（>100MB）；若让用户手动导入，则使用门槛太高。
    - **建议**：需要明确首选方案。可以考虑提供一个极小的预置模型（如 `tiny` 的最低量化版），同时在应用内提供清晰的引导，让用户在Wi-Fi环境下“一键下载”更优的模型。这虽然在首次下载时需要网络，但能平衡应用体积和用户体验。

3.  **长视频处理与资源消耗**
    - **问题**：对于长达1-2小时的视频，持续进行ASR将是巨大的电量和内存消耗。PRD提到了分段处理，但后台任务的优先级、资源调度策略需要更详细的设计。
    - **建议**：
        - **电量**：在识别过程中，应提供“节能模式”选项，适当增加处理间隔或降低CPU/GPU功耗限制。
        - **内存**：明确音频缓存和字幕结果的上限（如最多缓存多少分钟的音频或多少条字幕），并设计有效的LRU（最近最少使用）清理策略。

4.  **进度拖拽后的字幕同步策略**
    - **问题**：当用户拖动进度条到一个未处理的区域时，PRD提到“缺口部分标记‘处理中’”。这里的具体用户体验需要细化。是立即开始处理当前时间点，还是继续按顺序处理？
    - **建议**：定义一个明确的**抢占式处理策略**。当用户拖动进度后，应立即中断当前的后台顺序识别任务，将ASR引擎的计算资源优先分配给用户当前播放时间点之后的N秒（例如，播放点之后的60秒），以最快速度生成当前窗口的字幕。

5.  **多语言与自动检测的可靠性**
    - **问题**：Whisper的自动语言检测本身会消耗额外的计算资源，且在短音频或嘈杂环境下可能出错。
    - **建议**：在UI上应明确告知用户“自动检测可能降低速度和准确性”，并强烈推荐用户在已知语言的情况下手动选择，同时将用户上次的选择持久化。

## 4. 具体建议

- **章节 6.3 (本地ASR引擎)**：建议补充一个“模型下载与管理”的详细流程，包括下载状态（等待、下载中、失败、完成）、存储空间检查、模型校验（checksum）等。
- **章节 7 (非功能需求)**：在“性能”部分，建议将“典型设备”进行更具体的定义，例如“iPhone 13 / Google Pixel 6同等级别设备”。
- **章节 10 (关键交互与流程)**：为“进度拖动”流程增加一个更详细的子流程图，描述ASR任务如何被中断和重新调度。
- **章节 11 (UI/UX)**：在设置页中，增加一个“缓存管理”入口，允许用户手动清理所有识别产生的临时文件，这与PRD中的隐私承诺相呼应。

## 5. 结论

这份PRD文档为项目提供了一个极佳的起点。上述提出的问题和建议旨在进一步完善细节，降低项目执行风险。开发团队可以基于此文档充满信心地启动M1原型的开发，并在原型阶段重点验证上述风险点（特别是性能和长视频处理策略）。

---
**评审完成。**