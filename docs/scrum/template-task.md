# Task 详细设计模板

- Sprint：Sx
- Task：Task-XXX 标题
- PBI：链接/编号
- Owner：@
- 状态：Todo | In Progress | Review | Done

## 相关 TDD
- [ ] 在此添加链接（例如：`tdd/iOS-macOS/hld-ios-macos-vX.Y.md` 或 `tdd/Android/hld-android-vX.Y.md`）— 用一句话写出关键约束

## 相关 ADR
- [ ] 在此添加关联 ADR（例如：`docs/adr/iOS-macOS/0004-logging-metrics-strategy.md`）— 用一句话写出主要影响

## 1. 目标与范围
- 目标（可量化）：…
- 范围 / 非目标：…

## 2. 方案要点（引用为主）
- 采用的接口/约束/契约：见 TDD §x.x、ADR-00xx
- 与 TDD 差异的本地实现细节（如有）：1-3 条

## 3. 改动清单
- 影响模块/文件：packages/…、apps/…
- 接口/协议变更（如有）：签名、错误语义、兼容性
- 数据/迁移（如有）：步骤与回滚

## 4. 实施计划
- PR 拆分与步骤：PR1 …，PR2 …
- 特性开关/灰度：开关名、启停条件

## 5. 测试与验收
- 单测：用例与夹具
- 集成/E2E：场景与断言
- 验收标准：数据与阈值

## 6. 观测与验证
- 日志/指标/追踪埋点：字段、频率、阈值
- 验证方法：本地、CI、真机

## 7. 风险与未决
- 风险 A：缓解 … / 负责人 / 截止时间

## 定义完成（DoD）
- [ ] CI 通过（构建/测试/SwiftLint 严格模式）
- [ ] 无硬编码字符串（国际化）
- [ ] 文档/变更日志更新
- [ ] 关键路径测试覆盖与可观测埋点到位