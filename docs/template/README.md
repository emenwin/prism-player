# 文档模板索引

本目录包含 Prism Player 项目的所有文档模板。每个模板都经过精心设计，确保文档的一致性、可追溯性和实用性。

---

## 📋 模板列表

| 编号 | 模板名称 | 文件名 | 使用场景 | 预估耗时 | 依赖模板 |
|------|---------|--------|---------|---------|---------|
| 0 | **PRD 产品需求文档** | `0.prd.template.md` | 新功能/重大需求变更 | 2-4h | - |
| 1 | **Technical Feasibility 技术可行性** | `1.technical-feasibility.template.md` | 技术验证 | 2-4h | PRD |
| 2 | **TDD/HLD 技术设计文档** | `2.tdd.template.md` | 架构/模块设计 | 4-8h | PRD, Feasibility |
| 3 | **ADR 架构决策记录** | `3.adr.template.md` | 关键技术决策 | 1-2h | PRD, Feasibility |
| 4 | **Sprint Plan 冲刺计划** | `4.sprint-plan.template.md` | Sprint 开始 | 0.5-1h | PRD, HLD |
| 5 | **Sprint Task List 任务清单** | `5.sprint-task-list.template.md` | Sprint 开始 | 0.5h | Sprint Plan |
| 6 | **Sprint Review/Retrospective** | `6.sprint-review-retrospective.template.md` | Sprint 结束 | 0.5h | Sprint Plan |
| 7 | **Task 详细设计** | `7.task-详细设计.template.md` | 复杂任务(3+ SP) | 1-2h | HLD |

---

## 🔄 文档流程图

```
需求阶段
   │
   └─→ PRD (0) ──────────────────────────────────┐
          │                                       │
          ├─→ Feasibility (1) ──→ Go/No-Go       │
          │                                       │
          ├─→ ADR (3) ──────────────┐            │
          │                          │            │
设计阶段   │                          │            │
          │                          │            │
          └─→ HLD/TDD (2) ◄──────────┘            │
                 │                                │
                 │                                │
计划阶段          │                                │
   │             │                                │
   ├─→ Sprint Plan (4) ◄──────────────────────────┘
   │      │
   │      ├─→ Sprint Task List (5)
   │      │        │
   │      │        └─→ Task Design (7) ──→ 实施
   │      │                  │
   │      │                  └─→ PR & Code Review
   │      │
总结阶段   │
   │      │
   └─→ Sprint Review (6) ──→ 下一个 Sprint
```

---

## 📚 模板详细说明

### 0. PRD 产品需求文档

**用途**: 定义产品功能需求和成功指标  
**关键内容**:
- 背景与机会
- 量化目标与基线值
- 用户画像与场景
- 功能需求（FR）与非功能需求（NFR）
- 国际化要求（无硬编码字符串）

**下游文档**: ADR、HLD、Feasibility

---

### 1. Technical Feasibility 技术可行性

**用途**: PRD → ADR/HLD 之间验证技术方案  
**关键内容**:
- 验证目标与成功标准
- 关键假设与约束
- 方案对比与 PoC 实现
- 性能验证数据
- Go/No-Go 决策建议
- 对 PRD/HLD 的反馈

**下游文档**: ADR、HLD

---

### 2. TDD/HLD 技术设计文档

**用途**: 定义系统架构和模块设计  
**关键内容**:
- 设计原则（SOLID、MVVM 等）
- 架构总览（架构图/时序图）
- 模块依赖矩阵
- 接口与集成
- 可观测性埋点清单
- 测试策略

**下游文档**: Task Design、ADR

---

### 3. ADR 架构决策记录

**用途**: 记录关键技术决策过程和理由  
**关键内容**:
- 背景与问题陈述
- 方案对比（2-3 个备选方案）
- 决策结果与理由
- 审查者与决策者
- 相关决策（替代/补充/冲突/依赖）

**特点**: 
- ✅ 一经接受，不可修改（仅可标记为已废弃）
- ✅ 永久保留，提供历史追溯

**下游文档**: HLD

---

### 4. Sprint Plan 冲刺计划

**用途**: 定义 Sprint 范围、目标和质量标准  
**关键内容**:
- Sprint 目标（SMART 原则）
- PBI 列表与故事点
- 上个 Sprint 回顾引用
- 测试覆盖率目标（Core ≥ 80%, UI ≥ 60%）
- 依赖与风险

**下游文档**: Sprint Task List

---

### 5. Sprint Task List 任务清单

**用途**: 跟踪 Sprint 任务进度和每日更新  
**关键内容**:
- 进度概览
- 每日更新区（完成/进行中/计划）
- 任务清单（状态/优先级/依赖/验收标准）
- 风险与缓解措施

**更新频率**: 每日更新

**下游文档**: Task Design

---

### 6. Sprint Review/Retrospective 回顾

**用途**: Sprint 结束时总结和改进  
**关键内容**:
- Sprint 目标达成情况
- 速度趋势分析
- 质量指标（测试覆盖率/SwiftLint/CI 时间）
- 回顾（What went well / What to improve）
- 行动项（流程改进/技术改进/团队建设）

**下游文档**: 下一个 Sprint Plan

---

### 7. Task 详细设计

**用途**: 复杂任务（3+ SP）的实施指南  
**关键内容**:
- 方案要点（引用 HLD/ADR）
- 设计偏差说明（与 HLD 的差异）
- 改动清单（文件/接口/数据）
- 测试用例与夹具
- DoD（定义完成）包含文档更新检查

**下游文档**: PR、Code Review

---

## 🎯 使用指南

### 何时创建文档？

| 阶段 | 触发条件 | 创建文档 |
|------|---------|---------|
| **需求** | 新功能/重大需求变更 | PRD (0) |
| **验证** | 技术方案不确定 | Feasibility (1) |
| **设计** | 架构/模块设计 | HLD (2) |
| **决策** | 关键技术选型 | ADR (3) |
| **计划** | Sprint 开始 | Sprint Plan (4) + Task List (5) |
| **实施** | 复杂任务(3+ SP) | Task Design (7) |
| **总结** | Sprint 结束 | Sprint Review (6) |

### 文档依赖关系

```
PRD (0) ──┬──→ Feasibility (1) ──→ ADR (3) ──┐
          │                                   │
          └───────────────────────────────────┤
                                              │
                                              ↓
                                        HLD/TDD (2)
                                              │
                                              ↓
                                        Sprint Plan (4)
                                              │
                                              ↓
                                        Task List (5)
                                              │
                                              ↓
                                        Task Design (7)
                                              │
                                              ↓
                                         实施 & PR
                                              │
                                              ↓
                                        Sprint Review (6)
```

### 文档分层原则

遵循"分层递进、互补不重复"原则：

| 文档类型 | 抽象层级 | 核心问题 | 内容焦点 | 代码深度 |
|---------|---------|---------|---------|---------|
| PRD | 需求层 | **做什么？** | 产品功能、用户价值 | ❌ 无代码 |
| Feasibility | 验证层 | **能做吗？** | 技术验证、性能数据 | ⚠️ PoC 代码 |
| ADR | 决策层 | **为什么？** | 方案对比、决策理由 | ❌ 无代码 |
| HLD | 架构层 | **是什么？** | 系统架构、模块设计 | ⚠️ 接口级 (<20 行) |
| Task Design | 实现层 | **怎么做？** | 实施步骤、测试用例 | ✅ 实现级 (20-50 行) |

---

## ✅ 文档质量检查清单

### PRD 检查项
- [ ] 有明确的变更历史和版本号
- [ ] 目标可量化，有当前基线值
- [ ] 国际化要求明确（无硬编码字符串）
- [ ] 非功能需求完整（性能/安全/可观测性）

### ADR 检查项
- [ ] 有 2-3 个备选方案对比
- [ ] 决策理由清晰可追溯
- [ ] 标明审查者和决策者
- [ ] 相关决策关系明确（替代/补充/冲突）

### HLD 检查项
- [ ] 有明确的设计原则
- [ ] 模块依赖矩阵清晰
- [ ] 接口定义完整
- [ ] 可观测性埋点清单完整

### Task Design 检查项
- [ ] 引用 HLD/ADR 相关章节
- [ ] 设计偏差有明确说明
- [ ] 测试用例和夹具准备清晰
- [ ] DoD 包含文档更新检查

### Sprint Review 检查项
- [ ] 速度趋势数据完整
- [ ] 质量指标达成情况清晰
- [ ] 行动项有负责人和截止日期

---

## 🔧 最佳实践

### 1. 引用而非重复
- Task Design 应引用 HLD 章节，而非重复架构说明
- ADR 应引用 HLD 获取详细设计，而非在 ADR 中编写详细实现

### 2. 双向可追溯
```
PRD §2.3 → ADR-0005 → HLD §4.2 → Task-203
  ↑          ↑          ↑          ↑
Why       Decision    Design    How to
```

### 3. 版本管理
- 所有模板在文件末尾标注模板版本和变更记录
- 文档内容使用版本号（如 PRD v0.2, HLD v0.2）
- ADR 使用递增编号（ADR-0001, ADR-0002）

### 4. 持续更新
- PRD/HLD: 长期维护，版本化迭代
- ADR: 永久保留，不可修改
- Task Design: Sprint 周期内有效，完成后归档

---

## 📞 联系与反馈

如有模板使用问题或改进建议，请：
1. 提交 Issue 到项目仓库
2. 联系技术文档负责人
3. 在团队 Retrospective 中讨论

---

**索引版本**: v1.0  
**最后更新**: 2025-10-30  
**维护者**: [@team]
